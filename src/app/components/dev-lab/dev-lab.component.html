<div class="playground-container">
  <!-- Header -->
  <header class="playground-header">
    <div class="header-content">
      <h1 class="title">
        <span class="icon">ğŸš€</span>
        GraphQL Playground
      </h1>
      <p class="subtitle">Test your GraphQL queries and mutations</p>
    </div>
  </header>

  <!-- NgRx Store Testing Section -->
  <section class="ngrx-testing-section">
    <div class="section-header">
      <h2>ğŸ§ª NgRx Store Testing</h2>
      <p>Test the Task Store (Actions â†’ Effects â†’ State)</p>
    </div>

    <div class="ngrx-actions">
      <button class="action-btn primary" (click)="loadTasksFromStore()">
        ğŸ“¥ Load Tasks (via Store)
      </button>
      <button class="action-btn success" (click)="createTaskViaStore()">
        â• Create Task (via Store)
      </button>
    </div>

    <div class="ngrx-state">
      <div class="state-card">
        <h3>ğŸ“Š Store State</h3>
        <div class="state-info">
          <p><strong>Loading:</strong> {{ (ngrxLoading$ | async) || false }}</p>
          <p><strong>Error:</strong> {{ (ngrxError$ | async) || 'None' }}</p>
          <p><strong>Tasks Count:</strong> {{ (tasks$ | async)?.length || 0 }}</p>
        </div>
      </div>

      <div class="state-card">
        <h3>ğŸ“‹ Tasks from Store</h3>
        @if (tasks$ | async; as tasks) {
          @if (tasks.length === 0) {
            <p class="empty-text">No tasks yet. Click "Load Tasks" to fetch!</p>
          } @else {
            <ul class="tasks-list">
              @for (task of tasks; track task.id) {
                <li class="task-item">
                  <strong>{{ task.title }}</strong>
                  <span class="task-status">{{ task.status }}</span>
                </li>
              }
            </ul>
          }
        }
      </div>
    </div>
  </section>

  <!-- Theme Testing Section -->
  <section class="theme-test-section m-8">
    <div class="section-header">
      <h2>ğŸ¨ Theme Store Test</h2>
      <p>Test NgRx theme state management</p>
    </div>

    <div class="theme-controls">
      <div class="theme-info">
        <h3>Current State:</h3>
        <ul>
          <li><strong>Preference:</strong> {{ preference$ | async }}</li>
          <li><strong>Resolved Theme:</strong> {{ theme$ | async }}</li>
          <li><strong>Is Dark Mode:</strong> {{ isDarkMode$ | async }}</li>
        </ul>
      </div>

      <div class="theme-buttons">
        <h3>Set Preference:</h3>
        <button (click)="setLight()">â˜€ï¸ Light</button>
        <button (click)="setDark()">ğŸŒ™ Dark</button>
        <button (click)="setSystem()">ğŸ’» System</button>
      </div>

      <div class="theme-system">
        <h3>Simulate System Change:</h3>
        <button (click)="simulateSystemChange('light')">System â†’ Light</button>
        <button (click)="simulateSystemChange('dark')">System â†’ Dark</button>
        <p class="hint">ğŸ’¡ Set preference to "System" first, then test these buttons</p>
      </div>
    </div>
  </section>

  <!-- Viewport Testing Section -->
  <section class="bg-white rounded-lg p-6 m-8 shadow-lg">
    <div class="text-center mb-4 pb-4 border-b-2 border-gray-200">
      <h2 class="font-bold text-2xl text-gray-800 mb-2">ğŸ“ Viewport Store Test</h2>
      <p class="text-gray-500 text-md">
        Resize your browser to see viewport state changes
      </p>
    </div>

    <div class="grid grid-cols-1 gap-6">
      <div class="bg-gray-50 rounded-lg p-5 border border-gray-200">
        <h3 class="text-lg font-semibold text-purple-600 mb-4">Current State:</h3>
        <ul class="space-y-3 grid grid-cols-3">
          <li><strong>Breakpoint:</strong> {{ breakpoint$ | async }}</li>
          <li><strong>Device Type:</strong> {{ deviceType$ | async }}</li>
          <li><strong>Is Mobile:</strong> {{ isMobile$ | async }}</li>
          <li><strong>Is Tablet:</strong> {{ isTablet$ | async }}</li>
          <li><strong>Is Desktop:</strong> {{ isDesktop$ | async }}</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <section class="playground-content">
    <!-- Left Panel: Query Editor -->
    <div class="editor-panel">
      <div class="panel-header">
        <h2>Query Editor</h2>
        <button class="execute-btn" (click)="executeQuery()" [disabled]="loading()">
          @if (loading()) {
            <span class="spinner"></span>
            Executing...
          } @else {
            â–¶ Execute
          }
        </button>
      </div>

      <!-- Example Queries -->
      <div class="examples">
        <label class="examples-label">Examples:</label>
        <div class="examples-buttons">
          @for (example of examples; track example.name) {
            <button class="example-btn" (click)="loadExample(example)">
              {{ example.name }}
            </button>
          }
        </div>
      </div>

      <!-- Query Textarea -->
      <div class="editor-section">
        <label class="editor-label">Query / Mutation</label>
        <textarea
          class="query-editor"
          [value]="query()"
          (input)="query.set($any($event.target).value)"
          placeholder="Enter your GraphQL query here..."
          spellcheck="false"
        ></textarea>
      </div>

      <!-- Variables Textarea -->
      <div class="editor-section">
        <label class="editor-label">Variables (JSON)</label>
        <textarea
          class="variables-editor"
          [value]="variables()"
          (input)="variables.set($any($event.target).value)"
          placeholder='{ "key": "value" }'
          spellcheck="false"
        ></textarea>
      </div>
    </div>

    <!-- Right Panel: Results -->
    <div class="results-panel">
      <div class="panel-header">
        <h2>Response</h2>
      </div>

      <div class="results-content">
        @if (loading()) {
          <div class="loading-state">
            <div class="loading-spinner"></div>
            <p>Executing query...</p>
          </div>
        } @else if (error()) {
          <div class="error-state">
            <div class="error-icon">âš ï¸</div>
            <h3>Error</h3>
            <pre class="error-message">{{ error() }}</pre>
          </div>
        } @else if (result()) {
          <div class="result-display">
            <pre class="result-json">{{ formatJson(result()) }}</pre>
          </div>
        } @else {
          <div class="empty-state">
            <div class="empty-icon">ğŸ“</div>
            <p>Execute a query to see results</p>
          </div>
        }
      </div>
    </div>
  </section>
</div>
